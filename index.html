<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <title>EnviroCar Statistics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="http://leaflet.github.io/Leaflet.draw/leaflet.draw.css" />
    <link rel="shortcut icon" href="https://52north.org/templates/52n-2012/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v1.0.0-beta.2/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>-->
    <script src="http://cdn.leafletjs.com/leaflet/v1.0.0-beta.2/leaflet.js"></script>
    <script src="http://leaflet.github.io/Leaflet.draw/leaflet.draw.js"></script>
    <script>
        $(function () {
            $("#dateStartLine").datepicker({dateFormat: "yy-mm-dd"});
            $("#dateEndLine").datepicker({dateFormat: "yy-mm-dd"});
            $("#dateStart").datepicker();
            $("#dateEnd").datepicker();
        });
    </script>
</head>

<body>
    <div id="map">
        <script language="JavaScript" src="js/functions.js"></script>
    </div>
    <div id="menu2">
    </div>
    <div id="menu">

        <ul class="w3-navbar w3-blue">
            <li><a>Abfragegeometrien:</a></li>
            <li><a onclick="openCity('Linie')">Linie</a></li>
            <li><a onclick="openCity('Kreis')">Kreis</a></li>
        </ul>


        <div style="height:6.8vw;" id="Abfragegeometrie" class="geometry">
            <p>Wählen Sie eine Geometrie.</p>
        </div>
        <div style="padding: 1vw;">
            <div style="" id="Linie" class="geometry">
                <h3>Linie</h3>
                <p>Zwischen dem
                    <input type="text" id="dateStartLine" placeholder="Datum" \> und
                    <input type="text" id="dateEndLine" placeholder="Datum" \> </p>
                <p>die Wochentage
                    <select id="dayStartLine">
                        <option value="null">Auswahl</option>
                        <option value="1">Montag</option>
                        <option value="2">Dienstag</option>
                        <option value="3">Mittwoch</option>
                        <option value="4">Donnerstag</option>
                        <option value="5">Freitag</option>
                        <option value="6">Samstag</option>
                        <option value="0">Sonntag</option>
                    </select> bis
                    <select id="dayEndLine">
                        <option value="null">Auswahl</option>
                        <option value="1">Montag</option>
                        <option value="2">Dienstag</option>
                        <option value="3">Mittwoch</option>
                        <option value="4">Donnerstag</option>
                        <option value="5">Freitag</option>
                        <option value="6">Samstag</option>
                        <option value="0">Sonntag</option>
                    </select>abfragen.
                </p>

                <a class="tooltip" style="z-index:3; position: fixed; left: 30vw; bottom:16vw; text-align:center; ">
                ?
				<span>
					<strong>Linie</strong><br />
					Nach erfolgreicher Abfrage werden die Geschwindigkeitswerte der Linie zugeordnet und Farbkodiert. Sie können dann auf die einzelnen Liniensegmente klicken und die Werte in einem erscheinenden Fenster ablesen. 
				</span>
			</a>

                <p>Von
                    <input type="text" id="timeWindow1Line" value="00:00" />Uhr bis
                    <input type="text" id="timeWindow2Line" value="23:59" />Uhr.</p>
                <hr style="border:solid #0099FF 1px;">
                <p>
                    <input type="button" id="polyLine" onclick="drawHandler.enable(); document.getElementById('cancelDraw').disabled = false;" value="Linie Zeichnen" />
                    <input type="button" id="cancelDraw" onclick="drawHandler.disable(); document.getElementById('cancelDraw').disabled = true; document.getElementById('polyDel').disabled = true;" value="Abbrechen" disabled />
                    <input type="button" id="polyDel" value="Linie Löschen" onclick="document.getElementById('cancelDraw').disabled = true; document.getElementById('polyDel').disabled = true;" disabled />
                </p>
				<hr style="border:solid #0099FF 1px;">
				<div id="loaderText" style="text-align: center;">Diese Abfrage kann einige Minuten in Anspruch nehmen!</div>
            </div>

            <div id="Kreis" class="geometry">
                <h3>Kreis</h3>
                <p>Radius:
                    <input type="number" min="1" max="1000" step="1" style="width:3vw" id="buffer" value="20" /> m
                </p>
                <br>
                <ul class="w3-navbar w3-blue" style="width:35vw; margin-left:-1vw;">
                    <li><a>Abfragezeiträume:</a></li>
                    <li><a onclick="openTime('Zeitfenster');alert('You are clicking on me');">Zeitfenster</a></li>
                    <li><a onclick="openTime('Zeitintervall');alert('And now clicking on me');">Datumsintervall</a></li>
                </ul>

                <div id="Abfragezeiträume" class="time">
                    <p>Wählen Sie einen Abfragezeitraum.</p>
                </div>

                <div id="Zeitfenster" class="time">
                    <h4>Zeitfenster nutzen:<input type="checkbox" class="zeit" style="margin-left: 0.5vw;" id="ZeitfensterBox" /></h4>
                    <p>Tag:
                        <select id="day">
                            <option value="null">Auswahl</option>
                            <option value="Montag,Dienstag,Mittwoch,Donnerstag,Freitag">Montag-Freitag</option>
                            <option value="Samstag">Samstag</option>
                            <option value="Sonntag">Sonntag</option>
                        </select>
                    </p>
                    <a class="tooltip" style="z-index:3; position: fixed; left: 30vw; bottom:5.5vw; text-align:center; ">
                ?
				<span>
					<strong>Zeitfenster</strong><br />
					Erfolgt im optionalen Zeitfenster keine Eingabe, so werden vorgefertigte Zeitabschnitte (6-10Uhr,10-15Uhr...) ausgegeben. 
				</span>
			</a>

                    <p>Optional von
                        <input type="text" id="timeWindow1" value="0" /> bis
                        <input type="text" id="timeWindow2" value="23" />Uhr <input type="button" id="setBuf" onclick="setCirc()" value="Speichern" /></p>
                  

                </div>

                <div id="Zeitintervall" class="time">
                    <h4>Datumsintervall nutzen:<input type="checkbox" class="zeit" style="margin-left: 0.5vw;" id="ZeitfensterBox2"/></h4>
                    <p>Zwischen dem
                        <input type="text" id="dateStart" placeholder="Datum" \> und
                        <input type="text" id="dateEnd" placeholder="Datum" \> </p>
                </div>


            </div>
        </div>

        <script>
            openCity("Abfragegeometrie")

            function openCity(geomName) {
                var i;
                filterCircle.setRadius(0)
                var x = document.getElementsByClassName("geometry");
                for (i = 0; i < x.length; i++) {
                    x[i].style.display = "none";
                }
                document.getElementById(geomName).style.display = "block";
            }
        </script>
        <script>
            openTime("Abfragezeiträume")

            function openTime(timeName) {
                var i;
                var x = document.getElementsByClassName("time");
                for (i = 0; i < x.length; i++) {
                    x[i].style.display = "none";
                }
                document.getElementById(timeName).style.display = "block";
            }
        </script>

    </div>
    <div id="values">
        <div id=menuButton>
            <a id="download">
                <button class="button">Tabelle herunterladen</button>
            </a>
            <input type="button" id="clear" onclick="remCon()" value="Tabelle löschen" />
            <input type="button" id="close" onclick="hide()" value="Fenster schließen" style="margin-left: 35%;" />
        </div>
    </div>
    <div id="values2" style="border:solid #5bbde8 2px; overflow:scroll;">
    </div>
    <div id="loader" style="background:url(loader/gears.gif) no-repeat center center;width:100%;height:100%;">
    </div>   
   <div class="dropdown" style="z-index:4;">
        <button onclick="slideDownInfo()" class="dropbtn">Information</button>
       <div id="myDropdown" class="dropdown-content">
           <p style="padding:1vw;">Diese Anwendung ermöglicht unter Angabe eines Zeitfensters und einer Gebietsgröße, die durchschnittlichen Geschwindigkeiten in einem von Ihnen bestimmten Gebiet zu berechnen und als .csv-Datei zur Verfügung zu stellen. <br>Mehr zum EnviroCar Projekt gibt es hier: <a href="https://envirocar.org/" target="_blank">Envirocar Homepage </a></p>
           </div>
    </div>

</body>

</html>